{
  "comments": [
    {
      "key": {
        "uuid": "44587541_08fba728",
        "filename": "cmds/installd/commands.c",
        "patchSetId": 2
      },
      "lineNbr": 1409,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2014-06-17T13:06:18Z",
      "side": 1,
      "message": "While you\u0027re here, would it be possible to check the subdir argument, to make sure \"..\" isn\u0027t in the path? Otherwise, this could be used to delete files outside of the /data/dalvik-cache directory.",
      "revId": "812b35faecf592377395fff98264c9b92e5c7757",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e44ec981_65bec654",
        "filename": "cmds/installd/commands.c",
        "patchSetId": 2
      },
      "lineNbr": 1416,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2014-06-17T13:06:18Z",
      "side": 1,
      "message": "Is this actually used? SELinux would block the deletion of the /data/dalvik-cache/profiles directory, although it wouldn\u0027t block the deletion of the contents of that directory.",
      "revId": "812b35faecf592377395fff98264c9b92e5c7757",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c44b8572_04cdd6f8",
        "filename": "cmds/installd/commands.c",
        "patchSetId": 2
      },
      "lineNbr": 1416,
      "author": {
        "id": 1014443
      },
      "writtenOn": "2014-06-17T13:57:42Z",
      "side": 1,
      "message": "It\u0027s only needed when we\u0027re upgrading from a version of the system that didn\u0027t use ISA specific cache dirs. I.e all dex files are placed under /data/dalvik-cache.\n\nEven in that scenario, we don\u0027t attempt to remove any directories under /data/dalvik-cache, just regular files. (See the change on line 1391)",
      "parentUuid": "e44ec981_65bec654",
      "revId": "812b35faecf592377395fff98264c9b92e5c7757",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0452fd22_4cc7737d",
        "filename": "cmds/installd/commands.c",
        "patchSetId": 2
      },
      "lineNbr": 1416,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2014-06-17T17:04:00Z",
      "side": 1,
      "message": "ah, got it. Thanks.",
      "parentUuid": "c44b8572_04cdd6f8",
      "revId": "812b35faecf592377395fff98264c9b92e5c7757",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}