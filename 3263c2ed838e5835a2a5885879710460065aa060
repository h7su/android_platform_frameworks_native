{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "157552bd_8e4e94de",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 56
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-19T04:08:18Z",
      "side": 1,
      "message": "minor comments... that can be ignored until WIP gets dropped.",
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54cf023c_b48dd4fc",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 65,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-19T04:08:18Z",
      "side": 1,
      "message": "+1",
      "range": {
        "startLine": 65,
        "startChar": 13,
        "endLine": 65,
        "endChar": 31
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8f8497fc_d788fbbf",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 65,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-05-17T02:31:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "54cf023c_b48dd4fc",
      "range": {
        "startLine": 65,
        "startChar": 13,
        "endLine": 65,
        "endChar": 31
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a43758a_22479655",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 69,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-19T04:08:18Z",
      "side": 1,
      "message": "copy this as well?... or is the caller guaranteed to outlive this?",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 23
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3dc36e6_0357bf39",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 69,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-04-27T01:17:44Z",
      "side": 1,
      "message": "In the most common use case, port is a pointer to a constant string and acl is a pointer to a static const structure (and so are its fields, mainly uuids). Here\u0027s one example of what that looks like: https://android.googlesource.com/trusty/lib/+/refs/heads/master/app/acvp/acvp.cpp#107\n\nI think it would be fine if we required port and acl to point to constant globals, I\u0027m just not sure what that looks like in C++ (this made me think of Rust where we could just slap a \u0027static on both parameters).",
      "parentUuid": "6a43758a_22479655",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 23
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95781004_07db99a9",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 69,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-28T01:07:47Z",
      "side": 1,
      "message": "Changing the type to std::shared_ptr?\n\nThen wrapping the static const struct in shared_ptr with a no-op deleter.\n\nstd::shared_ptr\u003cconst struct tipc_port_acl\u003e acl{\u0026kAcvpPortAcl, [](auto p){}};",
      "parentUuid": "f3dc36e6_0357bf39",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 23
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66009eca_608e3e20",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 69,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-05-17T02:31:45Z",
      "side": 1,
      "message": "The ACL structure points to a set of UUIDs via 2 levels of indirection, so we\u0027d need to copy 1) the structure, 2) an array of pointers to UUIDs, and 3) the UUIDs themselves. That\u0027s a lot of copying, and in most practical cases both the port name and structure (and the UUIDs it points to) are going to be fixed.\n\nI added a comment on the lifetime requirements of the parameters and how to use setupTrustyServer, they match the underlying low-level API at https://android.googlesource.com/trusty/lib/+/refs/heads/master/lib/tipc/include/lib/tipc/tipc_srv.h#46.",
      "parentUuid": "95781004_07db99a9",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 23
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22d4ba0a_75481d0b",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 69,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-05-17T04:42:38Z",
      "side": 1,
      "message": "\u003e in most practical cases\n\nThe \"most practical\" part is a bit concerning to me. Why can\u0027t it be \"all\"? I don\u0027t have a super strong opinion about std::shared_ptr, but wish that we at least have some comments about lifetime in the source code of binder as well.",
      "parentUuid": "66009eca_608e3e20",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 23
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45139c73_2b57a4d3",
        "filename": "libs/binder/trusty/RpcServerTrusty.cpp",
        "patchSetId": 56
      },
      "lineNbr": 69,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-05-17T04:55:51Z",
      "side": 1,
      "message": "I\u0027m not against making the API harder to misuse, just not sure how to do it without a deep copy of the ACL structure.",
      "parentUuid": "22d4ba0a_75481d0b",
      "range": {
        "startLine": 69,
        "startChar": 20,
        "endLine": 69,
        "endChar": 23
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e8cfd15_cd255c2d",
        "filename": "libs/binder/trusty/RpcTransportRaw.cpp",
        "patchSetId": 56
      },
      "lineNbr": 45,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-19T04:08:18Z",
      "side": 1,
      "message": "I see the same definition above. Do we need to dedup?",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 1
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db15eb11_27bf6b2f",
        "filename": "libs/binder/trusty/RpcTransportRaw.cpp",
        "patchSetId": 56
      },
      "lineNbr": 45,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-04-19T04:09:51Z",
      "side": 1,
      "message": "Definitely, I\u0027m just not sure where to put it. Utils.cpp could work but Utils.h is in the parent directory and not Trusty-specific.",
      "parentUuid": "2e8cfd15_cd255c2d",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 1
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5941e252_194b1494",
        "filename": "libs/binder/trusty/RpcTransportRaw.cpp",
        "patchSetId": 56
      },
      "lineNbr": 45,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-19T16:30:38Z",
      "side": 1,
      "message": "Why can\u0027t we have the declaration in Utils.h and wrap it with #if __TRUSTY__ (or something that is equivalent to it)?",
      "parentUuid": "db15eb11_27bf6b2f",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 1
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c20d304a_9116d118",
        "filename": "libs/binder/trusty/RpcTransportRaw.cpp",
        "patchSetId": 56
      },
      "lineNbr": 45,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-04-22T06:09:14Z",
      "side": 1,
      "message": "I added trusty/Utils.h, it\u0027s cleaner now.",
      "parentUuid": "5941e252_194b1494",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 1
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb4b9162_e90e0b02",
        "filename": "libs/binder/trusty/RpcTransportRaw.cpp",
        "patchSetId": 56
      },
      "lineNbr": 45,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-04-22T17:36:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c20d304a_9116d118",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 1
      },
      "revId": "3263c2ed838e5835a2a5885879710460065aa060",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}