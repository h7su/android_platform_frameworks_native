{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d385ca6a_0309afc4",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1046,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-07-15T23:35:56Z",
      "side": 1,
      "message": "I think you also need to disable this test for `!kEnableThreads` (see `bothSingleThreaded` in the Callbacks test, that one has the same problem).\n\n`singleThreaded` here only returns `true` if the service executable is single-threaded, for the test binary we have `kEnableThreads` (or just move this test from the `BinderRpc` suite to `BinderRpcThreads`).",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "260474f9_5464ece8",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1046,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-07-15T23:38:27Z",
      "side": 1,
      "message": "Sorry I meant `kEnableRpcThreads`.",
      "parentUuid": "d385ca6a_0309afc4",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "935bf46d_035cc11f",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1046,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2022-07-15T23:45:38Z",
      "side": 1,
      "message": "The tests pass right now without checking kEnableRpcThreads. I only see the problem with the singleThreaded() cases.\nShould I add that restriction because the behavior is going to change, or it shouldn\u0027t be working right now?",
      "parentUuid": "260474f9_5464ece8",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1856c9f2_8b0a870f",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1046,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-07-16T00:10:02Z",
      "side": 1,
      "message": "Interesting. I wonder if the death notification never gets delivered to a single-threaded `binderRpcTest`.\n\n\u003e Should I add that restriction because the behavior is going to change, or it shouldn\u0027t be working right now?\n\nI think it\u0027s the latter, I\u0027m not aware of any more planned changes to RpcThreads.",
      "parentUuid": "935bf46d_035cc11f",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "78e076bd_fe348dc3",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1046,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2022-07-18T16:51:45Z",
      "side": 1,
      "message": "I was not thinking things through here...\nbinderRpcTestsSingleThreaded is not run with binderRpcTest.\nRunning binderRpcTestsSingleThreaded make a lot more sense and does hang/fail without the `!kEnableRpcThreads` check.\nSorry for the extra noise/confusion!",
      "parentUuid": "1856c9f2_8b0a870f",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63d9fad0_38e8c103",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1074,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-07-16T00:10:02Z",
      "side": 1,
      "message": "Should this have an `EXPECT_TRUE(dr-\u003edead)`? In single-threaded mode, `wait_for` is a no-op so this test will pass if the death notification is never delivered.\n\nAlternatively, you could pass a predicate to `wait_for` that checks `dr-\u003edead`.",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4bacd08b_e0a36988",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1074,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2022-07-18T16:51:45Z",
      "side": 1,
      "message": "Added the EXPECT_TRUE to be safe.",
      "parentUuid": "63d9fad0_38e8c103",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9cf7150_3ac8086b",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1097,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-07-15T23:35:56Z",
      "side": 1,
      "message": "Same as above.",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f80892ca_d451712f",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1097,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2022-07-18T20:05:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9cf7150_3ac8086b",
      "revId": "316a5704d7f57c6d02eaf77a1d4282417f09dc70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}