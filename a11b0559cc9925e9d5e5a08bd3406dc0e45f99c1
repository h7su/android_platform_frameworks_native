{
  "comments": [
    {
      "key": {
        "uuid": "569ceadd_ced0b68c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 18,
      "author": {
        "id": 1013984
      },
      "writtenOn": "2018-09-26T17:13:06Z",
      "side": 1,
      "message": "Optional: I\u0027d use something like:\n\nTest: mmm -j frameworks/native/cmds/dumpstate/ \u0026\u0026 \\\n  adb push ${OUT}/data/nativetest64/dumpstate_test* \\\n  /data/nativetest64 \u0026\u0026 \\\n  adb shell /data/nativetest64/dumpstate_test/dumpstate_test \u0026\u0026\n  printf \"\\n\\n#### GOOD NEWS, EVERYONE: ALL TESTS PASSED! ####\\n\"\n\n\nSo you\u0027d make sure the tests passed when you see the message, otherwise you might miss a failure if dumpstate_test crashed (it happened to me in the past, it\u0027s hard to notice based on test output)",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 18,
        "endChar": 60
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd024efc_fc987ed0",
        "filename": "cmds/dumpstate/dumpstate.h",
        "patchSetId": 3
      },
      "lineNbr": 298,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2018-09-25T13:55:04Z",
      "side": 1,
      "message": "Returning -1 on success is unexpected for me.\n\nAn alternative would be to consider the case of \u0027-h\u0027 as a valid option. Add \"do_show_help\" or some such, and check for and appropriately handle that option in the caller of ParseCommandlineOptions. Then this function could return a boolean.",
      "range": {
        "startLine": 293,
        "startChar": 2,
        "endLine": 298,
        "endChar": 7
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bb4588a_a8d8418a",
        "filename": "cmds/dumpstate/dumpstate.h",
        "patchSetId": 3
      },
      "lineNbr": 298,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-09-25T14:19:08Z",
      "side": 1,
      "message": "Agree -1 is unexpected. I think handling -h separately is an overkill for now. Once all the code is refactored I\u0027m hoping we can test this in a different way. Or maybe I can add an out argument for exit code, and keep return bool. \n\n Maybe I can leave a TODO to revisit?",
      "parentUuid": "fd024efc_fc987ed0",
      "range": {
        "startLine": 293,
        "startChar": 2,
        "endLine": 298,
        "endChar": 7
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e1f286b0_15b4d3ef",
        "filename": "cmds/dumpstate/dumpstate.h",
        "patchSetId": 3
      },
      "lineNbr": 298,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2018-09-25T15:12:38Z",
      "side": 1,
      "message": "Okay by me to leave a TODO and revisit later.",
      "parentUuid": "2bb4588a_a8d8418a",
      "range": {
        "startLine": 293,
        "startChar": 2,
        "endLine": 298,
        "endChar": 7
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c2ffa53_eb0c975a",
        "filename": "cmds/dumpstate/tests/dumpstate_test.cpp",
        "patchSetId": 3
      },
      "lineNbr": 149,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2018-09-25T13:55:04Z",
      "side": 1,
      "message": "Does it work to do \u0027ds.options_ \u003d DumpOptions();\u0027 instead?",
      "range": {
        "startLine": 149,
        "startChar": 8,
        "endLine": 149,
        "endChar": 27
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e48b38f8_5471ce78",
        "filename": "cmds/dumpstate/tests/dumpstate_test.cpp",
        "patchSetId": 3
      },
      "lineNbr": 149,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-09-25T14:19:08Z",
      "side": 1,
      "message": "good idea",
      "parentUuid": "8c2ffa53_eb0c975a",
      "range": {
        "startLine": 149,
        "startChar": 8,
        "endLine": 149,
        "endChar": 27
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e163275a_ffcb82c8",
        "filename": "cmds/dumpstate/tests/dumpstate_test.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2018-09-25T13:55:04Z",
      "side": 1,
      "message": "I don\u0027t understand this comment.\n\nDo you mean that ds.ParseCommandlineOptions modifies the provided argv? If so, maybe note that in the comment describing the ParseCommandlineOptions method.\n\nRegardless, it\u0027s okay to call ds.ParseCommandlineOptions again as long as you pass a different argv, right?",
      "range": {
        "startLine": 245,
        "startChar": 0,
        "endLine": 246,
        "endChar": 54
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0ae2415_dabeac41",
        "filename": "cmds/dumpstate/tests/dumpstate_test.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-09-25T14:19:08Z",
      "side": 1,
      "message": "When getopt finishes parsing the argv, it set OPTIND \u003d -1, so you unless you reset it to 1 getopt() does nothing. https://linux.die.net/man/3/optind\n\nIf I explain this in the code, is that better?\n\nI mainly wrote this comment to indicate I cannot have multiple commandline parsing tests to test different combinations.\n\nI tried putenv(\"OPTIND\u003d1\") in my SetUp() but that did not help either and I decided not to put too much into it",
      "parentUuid": "e163275a_ffcb82c8",
      "range": {
        "startLine": 245,
        "startChar": 0,
        "endLine": 246,
        "endChar": 54
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eaae9d40_5861fee0",
        "filename": "cmds/dumpstate/tests/dumpstate_test.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1057373
      },
      "writtenOn": "2018-09-25T15:12:38Z",
      "side": 1,
      "message": "Your explanation helps. It\u0027s worth documenting that ParseCommandlineOptions can only be called once.\n\nMaybe \u0027optind \u003d 1\u0027 instead of putenv(\"OPTIND+1\"), and you could do it in ParseCommandlineOptions instead of in the test so that ParseCommandlineOptions can be called more than once? I\u0027m fine if you rather not play around with optind in this CL.",
      "parentUuid": "e0ae2415_dabeac41",
      "range": {
        "startLine": 245,
        "startChar": 0,
        "endLine": 246,
        "endChar": 54
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "396ff278_f8c78f8d",
        "filename": "cmds/dumpstate/tests/dumpstate_test.cpp",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-09-25T15:57:14Z",
      "side": 1,
      "message": "ooh that did it. Thanks!",
      "parentUuid": "eaae9d40_5861fee0",
      "range": {
        "startLine": 245,
        "startChar": 0,
        "endLine": 246,
        "endChar": 54
      },
      "revId": "a11b0559cc9925e9d5e5a08bd3406dc0e45f99c1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}