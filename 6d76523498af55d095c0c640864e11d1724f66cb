{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9edb1104_2babea93",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-15T03:40:37Z",
      "side": 1,
      "message": "Elliot, I am trying to have the host libbinder to use fork / exec / waitpid. These logic are hard to get right, so it would be nice if we can have you to shed some light on this.\n\nSpecifically, Utils.cpp is the main logic that needs to be scrutinized.\n\nThank you for your help!",
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "56c7b6bd_e61a8f1f",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-15T03:44:08Z",
      "side": 1,
      "message": "I should probably rename this to something else, since it collides with android::base::Pipe in unique_fd.h. Any suggestions?",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98ab0a86_0b73e5b9",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-15T03:49:28Z",
      "side": 1,
      "message": "Unresolving",
      "parentUuid": "56c7b6bd_e61a8f1f",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12eebf40_84cee3d0",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-15T17:45:53Z",
      "side": 1,
      "message": "You could avoid adding the class at all? It seems it is only adding a different API from libbase to make it more convenient to call android::base::Pipe. A std::variant is a heavy return type too. I know that doesn\u0027t matter on host, but the client of this code is only using this type as a struct, always accessing the members directly (even if they have \u0027nice\u0027 names). This is probably the same reason libbase doesn\u0027t have this abstraction at all, it\u0027s not strictly needed, right?",
      "parentUuid": "98ab0a86_0b73e5b9",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3f4a71b_9a25c25b",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-06-15T18:51:53Z",
      "side": 1,
      "message": "seems like there\u0027s another copy of this here too:\nhttps://source.corp.google.com/android/frameworks/native/libs/binder/tests/binderRpcTest.cpp;l\u003d264?q\u003dPipe%20readEnd%20case:yes\u0026sq\u003dpackage:%5Eandroid$\n\ni think the reason libbase doesn\u0027t have a type is that the two ends tend to get separated. if you look at the usages of the other copy of this class in the link above, that seems to be borne out --- the Pipe* is passed everywhere (why a pointer?!) but the recipients only use one end or the other. i think it seemed like it would lead to clearer code if we _didn\u0027t_ tempt people into this by bundling the two. (_some_ callers can also come up with more intention-revealing names than just \"read\" and \"write\" too.)",
      "parentUuid": "12eebf40_84cee3d0",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b16fb898_b2112e17",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-16T22:41:18Z",
      "side": 1,
      "message": "I\u0027ll remove this class and in binderRpcTest too",
      "parentUuid": "a3f4a71b_9a25c25b",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "494aff86_7006d29d",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-16T23:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b16fb898_b2112e17",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24d1e845_d07c6c8e",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-17T19:45:56Z",
      "side": 1,
      "message": "Elliott, would you accept this in libbase?",
      "parentUuid": "494aff86_7006d29d",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "990a794b_4112f8b4",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-17T22:13:19Z",
      "side": 1,
      "message": "Steven, what are you referring to?\n\nI\u0027ve already deleted the Pipe class here. Do you mean moving execute() to libbase?",
      "parentUuid": "24d1e845_d07c6c8e",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0552210e_0618a6ef",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-17T22:13:36Z",
      "side": 1,
      "message": "Unresolving",
      "parentUuid": "990a794b_4112f8b4",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98cdba6d_f29da177",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-21T20:45:36Z",
      "side": 1,
      "message": "Yeah, I did mean \u0027execute\u0027",
      "parentUuid": "0552210e_0618a6ef",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 10
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66c479a5_3aae8469",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-15T03:44:08Z",
      "side": 1,
      "message": "note: not using android::base::Result to avoid linking to libbase and fmtlib. Just treat it as Result\u003cCommandResult\u003e",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "424a7532_85bcee53",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-15T03:49:44Z",
      "side": 1,
      "message": "Unresolving",
      "parentUuid": "66c479a5_3aae8469",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "049505c4_87f120f8",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-15T03:55:36Z",
      "side": 1,
      "message": "Steven, are you okay if the host libbinder links to libbase? If so, I can happily use more utility classes / functions from libbase, including this one.",
      "parentUuid": "424a7532_85bcee53",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc211d21_4fe5d6bd",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-15T17:45:53Z",
      "side": 1,
      "message": "if you only need it host, go for it. However, I also don\u0027t really see why we really need this. It seems like CommandResult is returned via a synchronous callback and also via the result. Do we need both of these ways?",
      "parentUuid": "049505c4_87f120f8",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fafbba47_40009f76",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-16T22:41:18Z",
      "side": 1,
      "message": "CommandResult is not returned via a synchronous callback. The callback is used as a predicate to determine whether execute() should return before the process ends.\n\nAlso, instead of using this, maybe I should use android::base::expected instead?",
      "parentUuid": "dc211d21_4fe5d6bd",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5da2c3c0_853c9205",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-06-16T23:20:25Z",
      "side": 1,
      "message": "if you go with the libbase dep, definitely",
      "parentUuid": "fafbba47_40009f76",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24e8614d_016fdf70",
        "filename": "libs/binder/Utils.h",
        "patchSetId": 1
      },
      "lineNbr": 89,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-06-17T01:13:09Z",
      "side": 1,
      "message": "I don\u0027t need libbase if I am using expected.h instead of result.h",
      "parentUuid": "5da2c3c0_853c9205",
      "range": {
        "startLine": 89,
        "startChar": 0,
        "endLine": 89,
        "endChar": 64
      },
      "revId": "6d76523498af55d095c0c640864e11d1724f66cb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}