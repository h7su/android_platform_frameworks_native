{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0f84f2b1_424e14dd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-26T11:47:30Z",
      "side": 1,
      "message": "Is there a ticket or some other context for this change?",
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d05da9e5_a001beca",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1929575
      },
      "writtenOn": "2022-07-26T13:05:58Z",
      "side": 1,
      "message": "as known,dex2oat will hold installdlock. if dex2oat took long time that will cause system wtd. so in some case we will kill dex2oat to protect system from wtd.",
      "parentUuid": "0f84f2b1_424e14dd",
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62c088e8_67ef5264",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-26T13:14:23Z",
      "side": 1,
      "message": "Right, but if there\u0027s a partner request ticket or something like that it\u0027d be useful to reference it here with a \"Bug:\" tag.",
      "parentUuid": "d05da9e5_a001beca",
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63003106_d6148865",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 508,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-26T11:47:30Z",
      "side": 1,
      "message": "waitpid(2) says WTERMSIG \"should be employed only if WIFSIGNALED returned true.\"\n\nBut I wonder if we should flip this around and only try again without profile if dex2oat exited due to profile related errors only. +jiakaiz, WDYT?\n\nIf there\u0027s no specific error code we can look at, then at least I think we should skip the retry below if dex2oat exited due to any signal, not just SIGKILL.",
      "range": {
        "startLine": 508,
        "startChar": 12,
        "endLine": 508,
        "endChar": 46
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "491ffba1_5e27b902",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 508,
      "author": {
        "id": 1929575
      },
      "writtenOn": "2022-07-26T13:14:45Z",
      "side": 1,
      "message": "yes,we also think its no nesserary to retry this . for speed-profile,if remove profile flag,its same as verify.  and if so ,verify will also doing in boot phase.",
      "parentUuid": "63003106_d6148865",
      "range": {
        "startLine": 508,
        "startChar": 12,
        "endLine": 508,
        "endChar": 46
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4b84076_1382422e",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 508,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-28T11:56:25Z",
      "side": 1,
      "message": "+1 for exiting on any signal (i.e., `if (WIFSIGNALED(...)) { return ... }`).\n \nThere isn\u0027t a specific error code for profile related errors, but that\u0027s okay. We can keep the retry behavior for now. Ideally, otapreopt shouldn\u0027t retry at all, and it should be caller\u0027s responsibility to validate the profile before passing it to otapreopt, but that\u0027s out of the scope of this CL. We\u0027ll rewrite the whole thing in the future and make it behave in the ideal way.",
      "parentUuid": "491ffba1_5e27b902",
      "range": {
        "startLine": 508,
        "startChar": 12,
        "endLine": 508,
        "endChar": 46
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2e75691_01eaa098",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 508,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-28T11:57:51Z",
      "side": 1,
      "message": "\u003e for speed-profile,if remove profile flag,its same as verify.  and if so ,verify will also doing in boot phase.\n\nRegarding this, I still think there is a value to verify before reboot because it reduces the boot time.",
      "parentUuid": "e4b84076_1382422e",
      "range": {
        "startLine": 508,
        "startChar": 12,
        "endLine": 508,
        "endChar": 46
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dda1f85b_436423af",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 508,
      "author": {
        "id": 1929575
      },
      "writtenOn": "2022-07-28T12:35:16Z",
      "side": 1,
      "message": "yes, right.. ok ,for now we only  want  to stop the unomal situation. \nand about signal kill ,we found google has used dexopt cacncel, which is implement by kill in Andoird T`s bgdexopt. we also hope it suit for otapreopt~",
      "parentUuid": "b2e75691_01eaa098",
      "range": {
        "startLine": 508,
        "startChar": 12,
        "endLine": 508,
        "endChar": 46
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf372095_c75d0910",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 508,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-28T12:49:59Z",
      "side": 1,
      "message": "Mark as resolved.",
      "parentUuid": "dda1f85b_436423af",
      "range": {
        "startLine": 508,
        "startChar": 12,
        "endLine": 508,
        "endChar": 46
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52530dc2_f948f09b",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 509,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-28T11:56:25Z",
      "side": 1,
      "message": "Nit: \"Interrupted\" (capitalize \"i\" and add \"ed\").",
      "range": {
        "startLine": 509,
        "startChar": 29,
        "endLine": 509,
        "endChar": 38
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cc80a65_5c10c5a2",
        "filename": "cmds/installd/otapreopt.cpp",
        "patchSetId": 2
      },
      "lineNbr": 509,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-28T12:49:59Z",
      "side": 1,
      "message": "Mark as resolved.",
      "parentUuid": "52530dc2_f948f09b",
      "range": {
        "startLine": 509,
        "startChar": 29,
        "endLine": 509,
        "endChar": 38
      },
      "revId": "f7b96e862f7c1f657635671618c2765638e945da",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}