{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "96a26c3b_ee149750",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-05-05T16:23:07Z",
      "side": 1,
      "message": "With these two CLs the leak in parcel_fuzzer_rs (b/278648274) no longer happens, and I can see SpIBinder::drop being called now.",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2f3438e_fe0af702",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "I think all of the static asserts should assert both size and alignment is the same.",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d918446d_aaede9ff",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a2f3438e_fe0af702",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87eebde0_d9404be1",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-05-05T16:23:07Z",
      "side": 1,
      "message": "nit: change these comments to T::UninitType? There are more in this file.",
      "range": {
        "startLine": 163,
        "startChar": 16,
        "endLine": 163,
        "endChar": 27
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b3d6295a_e48dc70a",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "87eebde0_d9404be1",
      "range": {
        "startLine": 163,
        "startChar": 16,
        "endLine": 163,
        "endChar": 27
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1690fa8b_909b10ae",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 248,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "Update comment",
      "range": {
        "startLine": 246,
        "startChar": 0,
        "endLine": 248,
        "endChar": 63
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6695cf4d_4b233603",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 248,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "Right, good catch. I was going to update the comments but I forgot.",
      "parentUuid": "1690fa8b_909b10ae",
      "range": {
        "startLine": 246,
        "startChar": 0,
        "endLine": 248,
        "endChar": 63
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01c8c099_9a1de414",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 267,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "Update comment",
      "range": {
        "startLine": 266,
        "startChar": 0,
        "endLine": 267,
        "endChar": 47
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5bfc86a3_f92dc89b",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 267,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01c8c099_9a1de414",
      "range": {
        "startLine": 266,
        "startChar": 0,
        "endLine": 267,
        "endChar": 47
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d767a275_48d88bd1",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 278,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "I\u0027m concerned about this being slow in the case of primitives, e.g. a byte buffer. It\u0027s possible the compiler can be smart enough to optimize this for us, but if it isn\u0027t, is there any way we can specialize this with `Vec::resize()` instead for types that impl Copy?",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d08c87b0_37af9216",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 278,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T23:01:06Z",
      "side": 1,
      "message": "Looking at the disassembly of `allocate_vec_with_buffer\u003ci8\u003e` from `libbinder_rs.dylib.so`, it looks like the compiler is smart enough to use a `memset`. The function calls `__rust_alloc`, followed by a `memset`, then `__rust_dealloc` on the error path.\n\n```\n   160bb:       74 66                   je     16123 \u003c_RINvNtNtCsjDEFhBkDXPQ_6binder6parcel10parcelable24allocate_vec_with_bufferaEB6_+0x93\u003e\n   160bd:       48 89 c3                mov    %rax,%rbx\n   160c0:       48 8b 05 19 55 00 00    mov    0x5519(%rip),%rax        # 1b5e0 \u003cmemset@LIBC\u003e\n   160c7:       31 f6                   xor    %esi,%esi\n   160c9:       4c 89 fa                mov    %r15,%rdx\n   160cc:       48 89 df                mov    %rbx,%rdi\n   160cf:       ff d0                   call   *%rax\n```",
      "parentUuid": "d767a275_48d88bd1",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c67078e_b54edddf",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 296,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "UninitType isn\u0027t MaybeUninit anymmore. Update comment.",
      "range": {
        "startLine": 296,
        "startChar": 64,
        "endLine": 296,
        "endChar": 78
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96445fcb_51364a84",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 296,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c67078e_b54edddf",
      "range": {
        "startLine": 296,
        "startChar": 64,
        "endLine": 296,
        "endChar": 78
      },
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0242b885_a34c8c4e",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 367,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "Update comment",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ece45398_afcc5468",
        "filename": "libs/binder/rust/src/parcel/parcelable.rs",
        "patchSetId": 4
      },
      "lineNbr": 367,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0242b885_a34c8c4e",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26e63244_f6e25d05",
        "filename": "libs/binder/rust/src/parcel/parcelable_holder.rs",
        "patchSetId": 4
      },
      "lineNbr": 174,
      "author": {
        "id": 1809421
      },
      "writtenOn": "2023-05-05T16:55:24Z",
      "side": 1,
      "message": "Can this be pub(crate) at least?",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "85380fd1_087f7e01",
        "filename": "libs/binder/rust/src/parcel/parcelable_holder.rs",
        "patchSetId": 4
      },
      "lineNbr": 174,
      "author": {
        "id": 1809582
      },
      "writtenOn": "2023-05-05T22:04:28Z",
      "side": 1,
      "message": "`can\u0027t leak crate-private type` error.",
      "parentUuid": "26e63244_f6e25d05",
      "revId": "8f0e200cb7ac63580669858a63a11193e0e15a34",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}