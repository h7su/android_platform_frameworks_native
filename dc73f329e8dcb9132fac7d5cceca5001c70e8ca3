{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9f639315_302a3f20",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-05-25T02:23:45Z",
      "side": 1,
      "message": "Why is this done in another thread? What happens when it\u0027s done in the current thread?",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 25
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ff76eaf_b4dda135",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-05-25T02:27:07Z",
      "side": 1,
      "message": "I added other comments here. See documentation at http://aosp/1716634. WDYT? We could support this, just don\u0027t necessarily need to right now. If you think it\u0027s important, I\u0027m happy to add it (I figure manually shutting down the server will generally never happen, always prefer to let linux clean it up. However, we need it for the tests, and for Yifan\u0027s project)",
      "parentUuid": "9f639315_302a3f20",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 25
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "338d01c3_84900f01",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-05-25T02:34:38Z",
      "side": 1,
      "message": "Then I think this should better be named as \u0027scheduleShutdown\u0027 or similar.",
      "parentUuid": "1ff76eaf_b4dda135",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 25
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8ebd378_17b80da9",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-05-25T02:35:24Z",
      "side": 1,
      "message": "If you do think this is important though, I\u0027d like to follow-up. I am tempted to crash in this case. It\u0027s not really clear what shutdown should do if it is called on a thread in the threadpool (it would be a bit complicated, since it would have to clean up state in a different way, but keep enough state around to know to return to the kernel). meh\naaa\nIn this particular test case, it is important that it is in a separate thread for another reason. Since the binder transaction has a pending refcount, I added \u0027shutdown\u0027 here (instead of using \u0027die\u0027) so that the server can finish the transaction and flush all refs back across the wire before shutting down.",
      "parentUuid": "1ff76eaf_b4dda135",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 25
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b517d2a8_d3149d9a",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 203,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-05-25T02:39:20Z",
      "side": 1,
      "message": "I understand the reason why this function is written in this way. My remaining concern was naming only, which shouldn\u0027t be significant. I feel fine as it is now.",
      "parentUuid": "e8ebd378_17b80da9",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 25
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22c1ca6f_1dd57cab",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 206,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-05-25T02:23:45Z",
      "side": 1,
      "message": "So, doesn\u0027t this guarantee that the shutdown was actually done?",
      "range": {
        "startLine": 206,
        "startChar": 15,
        "endLine": 206,
        "endChar": 28
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "620ad4fa_37110b5a",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 206,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-05-25T02:27:07Z",
      "side": 1,
      "message": "it is guaranteeing that it\u0027s scheduled for now.",
      "parentUuid": "22c1ca6f_1dd57cab",
      "range": {
        "startLine": 206,
        "startChar": 15,
        "endLine": 206,
        "endChar": 28
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c3a669f_256b0e4f",
        "filename": "libs/binder/tests/binderRpcTest.cpp",
        "patchSetId": 3
      },
      "lineNbr": 394,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-05-25T02:08:47Z",
      "side": 1,
      "message": "documented potential gotcha in https://android-review.googlesource.com/c/platform/frameworks/native/+/1716634",
      "range": {
        "startLine": 391,
        "startChar": 0,
        "endLine": 394,
        "endChar": 45
      },
      "revId": "dc73f329e8dcb9132fac7d5cceca5001c70e8ca3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}