{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b4775480_04762413",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1109308
      },
      "writtenOn": "2020-10-22T22:21:34Z",
      "side": 1,
      "message": "Pierre-Hugues:\n\nThanks for your contribution.\n\nThis change may not be that useful. IIRC input device \u0026 display binding are for the time being only written in a config file OEM makes, so OEM can make sure the input device in interest always has location. What is the situation you need to fix?\n\nI might well be wrong so I\u0027ll still defer this to either svv@, lzye@ or michaelwr@.",
      "revId": "8192ab824ddcaf339df972b9f0113d53e0986ae4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd18b415_791d4cd7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1211949
      },
      "writtenOn": "2020-10-23T11:28:01Z",
      "side": 1,
      "message": "There is a dynamic API for that:\nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/hardware/input/InputManager.java;l\u003d992?q\u003daddportassociation\n\nMy intent is to expose this API to the user, so that in desktop mode, they can force a device to be on desktop screen or smartphone screen.",
      "parentUuid": "b4775480_04762413",
      "revId": "8192ab824ddcaf339df972b9f0113d53e0986ae4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc51b663_edac1113",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1149384
      },
      "writtenOn": "2020-10-23T16:11:06Z",
      "side": 1,
      "message": "Right, \u0027inputPort\u0027 actually means the port that the device is plugged in.\n\nFor bluetooth devices, my suggestion was that the bluetooth stack somehow comes up with \u0027port\u0027 concept. Maybe something like a \u0027bluetooth controller number\u0027?\n\nWhat is the actual desired UX here? Why do you want to associate a bluetooth device with a specific screen rather than just let the focused events go to the currently focused display?",
      "revId": "8192ab824ddcaf339df972b9f0113d53e0986ae4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "09abe3b1_0c820479",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1211949
      },
      "writtenOn": "2020-10-23T18:35:39Z",
      "side": 1,
      "message": "There is already a notion of \"controller number\", i.e. Player {1,2,3,4}. I\u0027m guessing it\u0027s in input subsystem rather than bluetooth? Or maybe you\u0027re rather thinking of a \"bluetooth pairing number\"? But then I wouldn\u0027t expect it to be much different than bluetooth\u0027s MAC address.\n\nI don\u0027t have a strong opinion if it\u0027s better to match \"Player 1\" controller, or MAC address, but controlling via MAC address (which is my current proposal), seems more reliable, than based on Player number, though it\u0027s possible either way since the API makes it dynamic anyway, and I don\u0027t believe this can be made static.\n\nIn the cases I have in mind (which is just gamepad + secondary screen), I have no mouse, or touchscreen. So I believe I can\u0027t set focus to secondary screen (though I could be wrong), except by dedicated intent from primary screen.\n\nLet\u0027s review concrete detailed cases. This part is rather long, so you can \nI have a ROG Phone 3, an USB-C only display, like Asus MB16AC (it has one USB-C port and nothing else), a power supply (the ROG Phone 3 has two USB-C ports, so you can charge with screen connected), an ADT1 Bluetooth Gamepad (Bluetooth without smartphone holder. Called Gamepad A), and a Gamesir g3s (Bluetooth gamepad with optional smartphone holder. Called Gamepad B)\n\nMy potential gaming use-cases are:\n# Gamepad B with holder + smartphone alone \u003d\u003d\u003e To play on the smartphone directly\n# Gamepad A no holder + secondary screen \u003d\u003d\u003e To play on the secondary screen directly\n# Gamepad A + B without holder + secondary screen \u003d\u003d\u003e To play two-player game on secondary screen\n# Gamepad A + B with holder + secondary screen \u003d\u003d\u003e To play two single-player games on both screen\n# Gamebad B with holder + secondary screen  \u003d\u003d\u003d\u003e To play on smartphone while watching video on secondary screen\n\nIn the first case, I want Gamepad B to be on smartphone screen, so it must either be set explicitly to smartphone screen, or set to any screen.\n\nIn the second case, I want Gamepad A to stick to secondary screen. Let\u0027s say I\u0027m playing an idle-clicker, I could be reading news on the smartphone while swiping to scroll (hence taking the focus), while I\u0027m pressing A in loop on the controller. Following focus means that my \"A presses\" goes to the smartphone, rather than on the game launched on the secondary screen. Another use-case, is that I have my kid playing with the controller and the secondary screen while I use my smartphone.\n\nCases 3 and 4 are respectively multi-player on secondary screen, and two concurrent single-player games. It\u0027s not possible to distinguish those two cases automatically. (granted, I\u0027m not totally sure that two concurrent single-player games are really all that relevant for smartphone + secondary screen, but I guess it is for autos)\n\nCases 2 and 5 can\u0027t be distinguished either.\n\nNow, that\u0027s only to cover Gamepad use-case, but another one is keyboard (for instance, I want to have my SSH terminal on secondary screen, while still reading my notifications every now and then on smartphone). Arguably, most of the time, the keyboard will come with the mouse, but still I think it would be annoying to have to click again to the secondary screen, and typing would go to whatever application is launched on the smartphone at the time if you forget to click.\n\nWhat\u0027s the desired UX of this? I honestly don\u0027t know. Here are two I can think of:\n* Every-time a device is connected (not paired) while screen is plugged, ask the user (on primary screen) if they want to map it to secondary screen. Every-time a screen is connected, ask the user if they want to map all their currently-connected controllers to secondary screen. This can be a bit annoying like if \n* In bluetooth pairing Settings, add an option \"send to secondary screen when secondary is connected\". But then, I might actually want to have that feature for USB devices as well.\n\nMy current plan is the first one, but I\u0027m not too confident this is the best way. FWIW I don\u0027t intent to implement this UX in AOSP though, that sounds too complicated to get to merge in AOSP.\n\nSorry for the long read :-)",
      "parentUuid": "cc51b663_edac1113",
      "revId": "8192ab824ddcaf339df972b9f0113d53e0986ae4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b50e41bb_e9114bfd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1149384
      },
      "writtenOn": "2020-12-18T00:56:12Z",
      "side": 1,
      "message": "Hi Pierre,\n\nBy the \"bluetooth controller\" i originally meant a physical bluetooth chip. But you can connect two different devices to the same bluetooth chip, so that one doesn\u0027t make much sense.\n\nI think the usecase where you have an external screen connected, and 2 gamepads, with different games on each screen is reasonable.\n\nIn this situation, I would lean towards distinguishing the controllers by their mac addresses.\n\nI don\u0027t think we should mix it with the \"port\" functionality, though. That sounds like it should be:\n\n1) A separate way to associate controller and display id\n2) Done dynamically\n3) shipped with some UX \"association\" menu to let the user choose.\n\nThe \"UX\" part of it can be pretty generic / simple: for example, when you click a specific input device, you can select \"primary display\", \"external display\", or \"currently focused display\".\n\nChris,\n\nAny thoughts here?",
      "parentUuid": "09abe3b1_0c820479",
      "revId": "8192ab824ddcaf339df972b9f0113d53e0986ae4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}