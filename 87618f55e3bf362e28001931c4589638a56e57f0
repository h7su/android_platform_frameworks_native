{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2d1c27bd_6782b072",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 63
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "I am half way done in reviewing this change",
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9d2be15_890e6d4a",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 296,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "You want CC_UNLIKELY?",
      "range": {
        "startLine": 296,
        "startChar": 8,
        "endLine": 296,
        "endChar": 19
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db6ed5cd_04330c3f",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 296,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "I only added it where it is a hot path.",
      "parentUuid": "e9d2be15_890e6d4a",
      "range": {
        "startLine": 296,
        "startChar": 8,
        "endLine": 296,
        "endChar": 19
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15440ee4_e3a1c99c",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 334,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "You want CC_UNLIKELY?",
      "range": {
        "startLine": 334,
        "startChar": 8,
        "endLine": 334,
        "endChar": 19
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a0c53b9_c550601a",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 334,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "ditto",
      "parentUuid": "15440ee4_e3a1c99c",
      "range": {
        "startLine": 334,
        "startChar": 8,
        "endLine": 334,
        "endChar": 19
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f867420_8d0957ab",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 450,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "\u003e Lines longer than 100 characters should be wrapped to improve readability; see https://source.android.com/setup/contribute/code-style#limit-line-length for more details.\n\nnit: Please fix.",
      "parentUuid": "a9cd2170_590d38af",
      "range": {
        "startLine": 450,
        "startChar": 0,
        "endLine": 450,
        "endChar": 104
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "215db365_2ec01f35",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 450,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "done",
      "parentUuid": "5f867420_8d0957ab",
      "range": {
        "startLine": 450,
        "startChar": 0,
        "endLine": 450,
        "endChar": 104
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4913340e_24e1694a",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 484,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "I smell potential memory leak here :)\n\nSo what happens if connection is lost, or one side crashes? Can the other side properly decStrong accordingly?",
      "range": {
        "startLine": 484,
        "startChar": 31,
        "endLine": 484,
        "endChar": 44
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e63f8043_097246a6",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 63
      },
      "lineNbr": 484,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "If we detect a client or server misbehaving or a corruption of state, RpcState::terminate is called (this clears all the data and frees all memory associated with this connection). For well-behaving clients/servers, if they all drop relevant binders, this will eventually get/send dec strong. We may want to expose expose an API in RpcConnection which calls RpcState::terminate eventually. However, this would be an ability we don\u0027t have in binder, so I haven\u0027t added it yet. You personally will want to add this API for your project.\n\nSo, here are the cases where I know there can be a leak:\n- if the client/server has a leak, and just holds the data forever, there will be a leak\n- if the client is waiting for a decStrong on a socket, but this is a client socket (it\u0027s not polling it), there would be a problem. I\u0027ve taken an extra note of this case, so thanks for asking, but this should be handled in b/182938272 (we will probably want to add a check that for any client/server pair, both sides are actively polling from commands from the other, and that thread could check for this condition)",
      "parentUuid": "4913340e_24e1694a",
      "range": {
        "startLine": 484,
        "startChar": 31,
        "endLine": 484,
        "endChar": 44
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d34485c_6ffb3310",
        "filename": "libs/binder/Debug.cpp",
        "patchSetId": 63
      },
      "lineNbr": 33,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "do we allocate this memory on the stack?\n\nEDIT: it looks like the compiler is smart enough so that it is directly read from .text",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 33,
        "endChar": 16
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7397e84f_6d8b83a8",
        "filename": "libs/binder/Debug.cpp",
        "patchSetId": 63
      },
      "lineNbr": 33,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "Changed to const anyway though, thanks",
      "parentUuid": "6d34485c_6ffb3310",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 33,
        "endChar": 16
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5fca2907_17db831b",
        "filename": "libs/binder/include/binder/RpcAddress.h",
        "patchSetId": 63
      },
      "lineNbr": 57,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "get?",
      "range": {
        "startLine": 57,
        "startChar": 26,
        "endLine": 57,
        "endChar": 30
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c9021efc_a3a27a5c",
        "filename": "libs/binder/include/binder/RpcAddress.h",
        "patchSetId": 63
      },
      "lineNbr": 57,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "Nah - \u0027view\u0027 means basically the same thing as \u0027get\u0027 here, but it is more explicit about the lifetime. Like how string_view is a temporary reference to the string, this is trying to tell whoever is reading the code using this, holding onto the value would be a problem.",
      "parentUuid": "5fca2907_17db831b",
      "range": {
        "startLine": 57,
        "startChar": 26,
        "endLine": 57,
        "endChar": 30
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d57657e_3851f62d",
        "filename": "libs/binder/include/binder/RpcConnection.h",
        "patchSetId": 63
      },
      "lineNbr": 112,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-03-20T01:03:20Z",
      "side": 1,
      "message": "What\u0027s RAAI",
      "range": {
        "startLine": 112,
        "startChar": 7,
        "endLine": 112,
        "endChar": 11
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "020bfdd5_4250d999",
        "filename": "libs/binder/include/binder/RpcConnection.h",
        "patchSetId": 63
      },
      "lineNbr": 112,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-03-22T23:12:36Z",
      "side": 1,
      "message": "*RAII, corrected",
      "parentUuid": "7d57657e_3851f62d",
      "range": {
        "startLine": 112,
        "startChar": 7,
        "endLine": 112,
        "endChar": 11
      },
      "revId": "87618f55e3bf362e28001931c4589638a56e57f0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}