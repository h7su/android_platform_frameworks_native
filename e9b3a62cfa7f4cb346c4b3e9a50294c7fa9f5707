{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "262439c9_5239e54f",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1812,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "Unrelated change / fix ? If this is related to the CL, please add a comment.",
      "range": {
        "startLine": 1812,
        "startChar": 0,
        "endLine": 1812,
        "endChar": 34
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a2fa9bdb_5ebfe89f",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1812,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-07T17:34:19Z",
      "side": 1,
      "message": "yes, this is a separate bug fix. I will update the comment",
      "parentUuid": "262439c9_5239e54f",
      "range": {
        "startLine": 1812,
        "startChar": 0,
        "endLine": 1812,
        "endChar": 34
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca0495b9_2c308fc0",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1937,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "ditto: unrelated? Or add a comment.",
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f8bb503_ede783cf",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1937,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "updated comment",
      "parentUuid": "ca0495b9_2c308fc0",
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8f33205_8daffa74",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1982,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "Can you expand on the comment? Are you saying out_oat got removed, but we still keep out_image and ou_vdex? If yes, why?",
      "range": {
        "startLine": 1982,
        "startChar": 0,
        "endLine": 1982,
        "endChar": 73
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5c1351e_3c07e671",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1982,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-07T17:34:19Z",
      "side": 1,
      "message": "When out_oat commit fails, both tmp file and old file are removed as we don\u0027t know why it fails and better to clean up old file to allow update in future. For others, it can be done in other way of removing all old files. What is your preference?",
      "parentUuid": "c8f33205_8daffa74",
      "range": {
        "startLine": 1982,
        "startChar": 0,
        "endLine": 1982,
        "endChar": 73
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "409a561e_b2ad3f1d",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1982,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T18:00:00Z",
      "side": 1,
      "message": "Ideally, could we:\n\nvoid saveOldFiles() {\n  mv existing_file.oat existing_file.oat.tmp\n  mv existing_file.vdex existing_file.vdex.tmp\n  mv existing_file.art existing_file.art.tmp\n}\n\nsaveOldFiles();\nif (!commitAllNewFiles()) {\n  restoreOldFiles();\n}",
      "parentUuid": "d5c1351e_3c07e671",
      "range": {
        "startLine": 1982,
        "startChar": 0,
        "endLine": 1982,
        "endChar": 73
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60ed31c3_59d05a9a",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1982,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "We get three final states: all files kept original. all files get new version. all files removed.",
      "parentUuid": "409a561e_b2ad3f1d",
      "range": {
        "startLine": 1982,
        "startChar": 0,
        "endLine": 1982,
        "endChar": 73
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26c5fc7e_48f55a5f",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1987,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "ditto, please expand.",
      "range": {
        "startLine": 1987,
        "startChar": 0,
        "endLine": 1987,
        "endChar": 74
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9fecc7af_bcfa6386",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1987,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "26c5fc7e_48f55a5f",
      "range": {
        "startLine": 1987,
        "startChar": 0,
        "endLine": 1987,
        "endChar": 74
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "574c6345_4852bce0",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1993,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "Ditto: I guess that\u0027s because we\u0027ve committed the two others but not this one?",
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c31e63b1_5c632322",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1993,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-07T17:34:19Z",
      "side": 1,
      "message": "Yes, when it fails, RestorableFile deletes both tmp and old file for the reason explained above.",
      "parentUuid": "574c6345_4852bce0",
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "300a3220_9374c6ec",
        "filename": "cmds/installd/dexopt.cpp",
        "patchSetId": 8
      },
      "lineNbr": 1993,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c31e63b1_5c632322",
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a3af272_ce4de0bc",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 40,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "Create",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 14
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c557a0a_d75dd62b",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 40,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0a3af272_ce4de0bc",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 14
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5afc2784_0cfdfcc3",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 52,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "const?",
      "range": {
        "startLine": 52,
        "startChar": 13,
        "endLine": 52,
        "endChar": 14
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d9d96fe0_08ba8ac3",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 52,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5afc2784_0cfdfcc3",
      "range": {
        "startLine": 52,
        "startChar": 13,
        "endLine": 52,
        "endChar": 14
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "626fa67a_2ba483ad",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "a",
      "range": {
        "startLine": 60,
        "startChar": 43,
        "endLine": 60,
        "endChar": 44
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1bb0d52a_31da3b9c",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "626fa67a_2ba483ad",
      "range": {
        "startLine": 60,
        "startChar": 43,
        "endLine": 60,
        "endChar": 44
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "376660aa_18f09392",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 68,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2021-12-07T13:38:10Z",
      "side": 1,
      "message": "const?",
      "range": {
        "startLine": 68,
        "startChar": 37,
        "endLine": 68,
        "endChar": 38
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f73074dc_667b1e34",
        "filename": "cmds/installd/restorable_file.h",
        "patchSetId": 8
      },
      "lineNbr": 68,
      "author": {
        "id": 1010465
      },
      "writtenOn": "2021-12-10T22:16:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "376660aa_18f09392",
      "range": {
        "startLine": 68,
        "startChar": 37,
        "endLine": 68,
        "endChar": 38
      },
      "revId": "e9b3a62cfa7f4cb346c4b3e9a50294c7fa9f5707",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}