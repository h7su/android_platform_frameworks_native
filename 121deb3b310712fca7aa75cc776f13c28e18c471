{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4a02b936_e41ffac9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-09-16T21:03:25Z",
      "side": 1,
      "message": "DEAD_OBJECT is kinda different from ECANCELED. To me:\n\nDEAD_OBJECT means the remote shuts down. This is not something I can control.\n\nECANCELED means I am actively shutting down this connection.",
      "revId": "121deb3b310712fca7aa75cc776f13c28e18c471",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "829d8e6e_70e472dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-09-16T21:08:39Z",
      "side": 1,
      "message": "I think the commit message explains this a bit. WDYT? We don\u0027t care if the connection is shutting down right now or it was shut down 1s ago. It is shut down, and it\u0027s dead now. This is the error code that binder clients expect, and it matches the binder driver behavior.",
      "parentUuid": "4a02b936_e41ffac9",
      "revId": "121deb3b310712fca7aa75cc776f13c28e18c471",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7304194a_3c82d4c5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-09-16T21:14:24Z",
      "side": 1,
      "message": "In the second case (ECANCELLED), the connection is technically not dead. Technically you can still send / receive stuff from the FD.\n\nIt is just that the shut down trigger is triggered.\n\nSo, I think it is not the matter of time to distinguish these two codes; it is the reason why the connection is considered abandoned.\n\nFor example, if the server is shutting down, then the server should see ECANCELED and the client should see DEAD_OBJECT. If the client is shutting down, then the client should see ECANCELED and the server should see DEAD_OBJECT.",
      "parentUuid": "829d8e6e_70e472dc",
      "revId": "121deb3b310712fca7aa75cc776f13c28e18c471",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0eb95691_cc2c4a23",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-09-16T21:17:31Z",
      "side": 1,
      "message": "That is the socket protocol, but it doesn\u0027t really have anything to do with the error codes people expect (and are already handling) in libbinder. If we were designing this from the ground up, maybe we would want to distinguish between these two cases, but the libbinder code and above understands DEAD_OBJECT (-EPIPE), not -ECANCELED.",
      "parentUuid": "7304194a_3c82d4c5",
      "revId": "121deb3b310712fca7aa75cc776f13c28e18c471",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53a2de2f_1204f404",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-09-16T21:18:01Z",
      "side": 1,
      "message": "That is, I think this argument is not valid:\n\n\u003e if your call happens to get\ninterrupted, you\u0027ll get -ECANCELED or if your call happened to be\nscheduled slightly later, you\u0027d get DEAD_OBJECT.\n\nI agree this part:\n\n\u003e if your call happens to get\ninterrupted, you\u0027ll get -ECANCELED \n\n(assuming interrupted means trigger is triggered). After this point, there should be no way you can get DEAD_OBJECT unless the remote has shutdown.",
      "parentUuid": "7304194a_3c82d4c5",
      "revId": "121deb3b310712fca7aa75cc776f13c28e18c471",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec76ceba_e40faf2a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-09-16T21:19:47Z",
      "side": 1,
      "message": "\u003e but it doesn\u0027t really have anything to do with the error codes people expect (and are already handling) in libbinder. \n\nThat\u0027s a better argument.",
      "parentUuid": "53a2de2f_1204f404",
      "revId": "121deb3b310712fca7aa75cc776f13c28e18c471",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}