{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "94de5ff5_936d8cbb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2023-12-07T03:54:11Z",
      "side": 1,
      "message": "The problem is that these symbols are not weak when built as a vendor module. Hence checking if null doesn\u0027t fix the issue. To build with vendor modules, these should be guarded with #ifdef, not __builtin_available.",
      "revId": "a54faf4949c9d46fd1c5055947b00623a9baa981",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ec36f0dd_19295534",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2023-12-07T05:38:04Z",
      "side": 1,
      "message": "Nevermind, I missed `__attribute__((weak))` in the change. I think this would work. Sorry about the noise.\n\nBtw, do we need a build-time check as well?",
      "parentUuid": "94de5ff5_936d8cbb",
      "revId": "a54faf4949c9d46fd1c5055947b00623a9baa981",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58777d28_3e992978",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2023-12-07T05:46:23Z",
      "side": 1,
      "message": "given that symbols are weak, do we still need nullchecks? `__builtin_available(V)` should be enough, no?",
      "parentUuid": "ec36f0dd_19295534",
      "revId": "a54faf4949c9d46fd1c5055947b00623a9baa981",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9943fae_38738bf9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-12-07T18:01:33Z",
      "side": 1,
      "message": "I don\u0027t know how `__builtin_available` works. This is all new to me. \n\nIt seems like we would need a `__builtin_available` equivalent for the vendor level now. Or that would need to be repurposed for vendor level if it no longer makes sense for SDK API level.\n\nIn the comment https://b.corp.google.com/issues/312510312#comment54 I interpreted that as `__builtin_available` won\u0027t work at all for vendor modules. Were you only saying the build-time checks don\u0027t work, but there is still some runtime behavior that does the equivalent to the nullptr check for weak symbols?",
      "parentUuid": "58777d28_3e992978",
      "revId": "a54faf4949c9d46fd1c5055947b00623a9baa981",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a3bcc30_84f5f7ec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-12-07T18:09:56Z",
      "side": 1,
      "message": "Also I couldn\u0027t figure out how you did: `I manually changed aarch64-linux-android10000 to aarch64-linux-android34 (to simulate the correction).` to reproduce those build issues in the bug.",
      "parentUuid": "b9943fae_38738bf9",
      "revId": "a54faf4949c9d46fd1c5055947b00623a9baa981",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}