{
  "comments": [
    {
      "key": {
        "uuid": "2431c1d1_101a0a87",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "This is a bug, right?  Abort?",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a41cd152_7766d867",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2431c1d1_101a0a87",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2431c1d1_f0349601",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 70,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "Maybe report the pid?",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59f1404f_807c16fa",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 70,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2431c1d1_f0349601",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e43969b5_a242c473",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-08T22:59:28Z",
      "side": 1,
      "message": "The semantics and logic might be unnecessarily complex.",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4224989_e8274b3c",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2014-07-08T23:36:08Z",
      "side": 1,
      "message": "I can\u0027t think of anyway to write this which is cleaner...",
      "parentUuid": "e43969b5_a242c473",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e474097d_14fbcd28",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "Possible alternative:  Split this function into two functions, one of which takes a name argument (which then performs the selabel_lookup only) and one that does not (which uses a previously cached result of getcon done during initialization, as in the keystore).  Then it is always explicit as to which one you are using and any bug that yields a NULL name will not generate an incorrect permission check but will rather abort the servicemanager.",
      "parentUuid": "e4224989_e8274b3c",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9f75445_dd0a0b42",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "I considered that but I wasn\u0027t sure about the duplicated code. It would make the semantics of the function much more clear.",
      "parentUuid": "e474097d_14fbcd28",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19fb4835_be6bb9b8",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T15:14:06Z",
      "side": 1,
      "message": "In the kernel at least, we prefer using separate functions in these cases.  If there is significant duplication of code, then you can take that part to a shared helper function.",
      "parentUuid": "f9f75445_dd0a0b42",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79ec447a_a1d95e2f",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 106,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "Any reason to still pass uids around?",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a41cd152_b7f05047",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 106,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "No there is not.",
      "parentUuid": "79ec447a_a1d95e2f",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2431c1d1_502482ce",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "ditto",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59f1404f_608112a8",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2431c1d1_502482ce",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2431c1d1_702186bd",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "ditto",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a41cd152_d7f5cc35",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2431c1d1_702186bd",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2431c1d1_30170e60",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "Any reason we can\u0027t do this check before calling find_svc(), since we are not using the svcinfo in any way for the check?  Otherwise caller can probe for the existence of a service even without permission.\nAlso, should we be doing an ALOGE...PERMISSION DENIED as in the svc_can_register() error path for each of these denials or only use the avc message?",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9045004_1ce2b537",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1048048
      },
      "writtenOn": "2014-07-09T14:50:28Z",
      "side": 1,
      "message": "It makes sense to call it first. I\u0027ll make all of the error logging consistent with the do_add_service logging.",
      "parentUuid": "2431c1d1_30170e60",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99e73894_22e2ee37",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 177,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2014-07-08T23:36:08Z",
      "side": 1,
      "message": "Something to think about: Can we implement the allow_isolated functionality using an SELinux policy? Longer term (not this change) I\u0027d love to see a neverallow rule which asserts that isolated_app can never do a find.",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e474097d_740a4188",
        "filename": "cmds/servicemanager/service_manager.c",
        "patchSetId": 4
      },
      "lineNbr": 177,
      "author": {
        "id": 1010111
      },
      "writtenOn": "2014-07-09T12:55:44Z",
      "side": 1,
      "message": "seapp_contexts maps anything in the isolated AID range (app\u003d_isolated) to the isolated_app domain, so this is just expressed via allow isolated_app \u003cservice_type\u003e:service_manager find; or neverallow isolated_app \u003cservice_type\u003e:service_manager find; for any given service type.",
      "parentUuid": "99e73894_22e2ee37",
      "revId": "9068461389d25999a6827bf783af7691afaf165e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}