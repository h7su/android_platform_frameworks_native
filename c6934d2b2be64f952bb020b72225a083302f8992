{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b5a32b6e_190900f5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1069543
      },
      "writtenOn": "2023-07-24T15:32:16Z",
      "side": 1,
      "message": "+1 - this looks like a maintenance headache.",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "230218fa_37632149",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-07-24T17:00:48Z",
      "side": 1,
      "message": "I did create this automatically, but need to post the scripts. The issue I am having is that I used an aosp/ build instead of an internal build to determine what is used. I thought there would only be a few stragglers, but there are surprisingly many. Also http://r.android.com/2672235 makes it so that the build would tell you exactly what you needed to add for incremental changes.\n\nIf you have other ideas, happy to hear it.",
      "parentUuid": "b5a32b6e_190900f5",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da9ae9a0_33f76a94",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2023-07-31T01:44:43Z",
      "side": 1,
      "message": "Do you have a list of symbols that were removed? \n\nI wish we do this more explicitly, either by\n\n(1) setting the default visibility to be hidden `(-fvisibility\u003dhidden)` and explicitly adding `__attribute__ ((visibility (\"default\")))` to selected APIs\n\n(2) or the way around (visible by default, explicitly hiding)",
      "parentUuid": "230218fa_37632149",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5559ea6f_a0a11bb9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-07-31T16:19:47Z",
      "side": 1,
      "message": "- this change fails due to internal projects, and it is mostly an experiment to show the benefit. I need to recreate it using checkbuilds from the internal tree in order to get it to work.\n\n- I haven\u0027t tried with \u0027-fvisibility\u003dhidden\u0027 in C++, and I intend to do the comparison before doing this at scale. maennich@ also mentioned this on this CL, and you can see the comment chain there for more details.",
      "parentUuid": "da9ae9a0_33f76a94",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf310fe4_79e16586",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-07-31T18:36:23Z",
      "side": 1,
      "message": "See also Elliott\u0027s commentary on this here: https://android-review.git.corp.google.com/c/platform/system/core/+/2681895/1//COMMIT_MSG#10\n\nThough for C symbols it might make more sense, for C++ I get this can be difficult (but it\u0027s also automatable).",
      "parentUuid": "5559ea6f_a0a11bb9",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6c16e9f_629f7dae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2023-08-01T02:50:12Z",
      "side": 1,
      "message": "I don\u0027t see maennich on this CL. Where is he?\n\nAnd yes, I agree with Eliott for C libraries like libcutils, but I don\u0027t think the same principle can be easily applied to C++ libraries like this.\n\nSo, it looks like the common ground we all agree is that we hide symbols by default and export only those needed. \n\nWe don\u0027t have a consensus on how to export symbols. Some options mentioned so far:\n\n1. version script\n2. visibility attribute in source code",
      "parentUuid": "bf310fe4_79e16586",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b618ecf_1a08bab2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-08-01T17:38:59Z",
      "side": 1,
      "message": "This is a POC of the savings possible. I\u0027ll follow-up with a more detailed design and approach and demo of (2).",
      "parentUuid": "b6c16e9f_629f7dae",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c92bb57_6b85f71b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2023-08-02T00:46:02Z",
      "side": 1,
      "message": "Thanks.\n\nWe also have to have a criteria on hiding or exporting a symbol. Two options:\n\n1. export only those are currently being used\n2. export only those are designed to be externally usable (by the lib author)\n\nI like 2.",
      "parentUuid": "4b618ecf_1a08bab2",
      "revId": "c6934d2b2be64f952bb020b72225a083302f8992",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}