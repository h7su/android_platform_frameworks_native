{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "89b62525_8e7be2d2",
        "filename": "libs/binder/include/binder/RpcSession.h",
        "patchSetId": 1
      },
      "lineNbr": 186,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-09-13T22:35:12Z",
      "side": 1,
      "message": "Perhaps you might want to have a constructor that accepts sp\u003cRpcSession\u003e as an argument.",
      "range": {
        "startLine": 184,
        "startChar": 0,
        "endLine": 186,
        "endChar": 96
      },
      "revId": "a746549f44e5ae7d67bfcaabe0c84508ad533504",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e02fe6bc_01d9912b",
        "filename": "libs/binder/include/binder/RpcSession.h",
        "patchSetId": 1
      },
      "lineNbr": 186,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-09-13T22:48:52Z",
      "side": 1,
      "message": "It would lead to a leak (circular reference). By passing it in here, we avoid needing to promote the session more than once (it happens to need to be promoted when this function is called).",
      "parentUuid": "89b62525_8e7be2d2",
      "range": {
        "startLine": 184,
        "startChar": 0,
        "endLine": 186,
        "endChar": 96
      },
      "revId": "a746549f44e5ae7d67bfcaabe0c84508ad533504",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c1a7ec3_dedfda30",
        "filename": "libs/binder/include/binder/RpcSession.h",
        "patchSetId": 1
      },
      "lineNbr": 186,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-09-13T23:56:05Z",
      "side": 1,
      "message": "If WaitForShutdownListener is always a member of RpcSession, then the former could have a const pointer to the latter when it\u0027s created.",
      "parentUuid": "e02fe6bc_01d9912b",
      "range": {
        "startLine": 184,
        "startChar": 0,
        "endLine": 186,
        "endChar": 96
      },
      "revId": "a746549f44e5ae7d67bfcaabe0c84508ad533504",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8fdce46_d387f2b3",
        "filename": "libs/binder/include/binder/RpcSession.h",
        "patchSetId": 1
      },
      "lineNbr": 186,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-09-14T00:14:29Z",
      "side": 1,
      "message": "Sure, but also then the ownership information is implicit rather than part of the type (I would try to avoid raw pointers everywhere, because we want to make ownership explicit, regardless of the current state of the code). The other downsides of moving it to the constructor:\n- cost an extra word size bytes of memory extra per RpcSession\n- require adding a constructor (more LOC, more functions to have to maintain)\n\nDefinitely, we could do it, but perhaps I don\u0027t understand what the motivation is. Is risk you are concerned about is that this will be created for one RpcSession, but used with another? Or is it aesthetic, since we have two functions here which take sp\u003cRpcSession\u003e?",
      "parentUuid": "4c1a7ec3_dedfda30",
      "range": {
        "startLine": 184,
        "startChar": 0,
        "endLine": 186,
        "endChar": 96
      },
      "revId": "a746549f44e5ae7d67bfcaabe0c84508ad533504",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}