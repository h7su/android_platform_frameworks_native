{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "48ca1fa2_05b043b7",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-11-03T01:46:05Z",
      "side": 1,
      "message": "which of these are actually used in libbinder? I don\u0027t think we want to flat copy and maintain APIs from libbase. Can we look at libbinder first and actually cut deps if possible or only maintain copies of a few, and use libbase in the tests?",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de4d654d_393d6a01",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2023-11-03T02:29:59Z",
      "side": 1,
      "message": "It\u0027s mostly Read/WriteFdToString and Read/WriteFully. Everything else is needed for GetExecutableDirectory. And maybe Basename/Dirname is being used somewhere minor.\n\nI looked at SO and there\u0027s no std library way of doing GetExecutableDirectory, every OS does this differently.",
      "parentUuid": "48ca1fa2_05b043b7",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee77f647_af3b09d1",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-11-03T02:35:27Z",
      "side": 1,
      "message": "GetExecutableDirectory is only used by the tests though.\n\nWhat\u0027s actually used here in BpBinder.cpp? I don\u0027t see anything. Is there anything in libbinder using these APIs?",
      "parentUuid": "de4d654d_393d6a01",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e39f9ee2_50fd3886",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2023-11-03T03:11:51Z",
      "side": 1,
      "message": "I just checked and indeed, it\u0027s not being used in BpBinder. It is still used in OS_unix_base, RecordedTransaction and servicedispatcher.\n\nIf we use libbase for tests, we won\u0027t have a good way to test this library on Linux!\n\nHowever, I can cut a great bunch of this code by migrating to std::filesystem, wdyt? At least for tests.",
      "parentUuid": "ee77f647_af3b09d1",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ab0d525_6bd73b49",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-11-03T03:42:59Z",
      "side": 1,
      "message": "Sure, but if we\u0027re only using functions in tests, can we leave them as helper functions in tests, not in libbinder itself?\n\nservicedispatcher is a separate binary which you shouldn\u0027t need.\n\nI think reading fully/writing fully to FDs, we can have a separate copy of this in libbinder for RecordedTransaction. That\u0027s fine. However, this GetExecutableDirectory stuff is pretty complicated. I think we can switch that out with something else?\n\nAlso, we can avoid exporting any of this as APIs since it would be an implementation detail of libbinder.",
      "parentUuid": "e39f9ee2_50fd3886",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d683219b_1ec7c75d",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2023-11-03T03:47:59Z",
      "side": 1,
      "message": "Yeah, I\u0027ll separate test helpers out and indeed I shouldn\u0027t have exposed file.h in Binder API (like I had to do with unique_fd). I\u0027ll fix all of this maybe tomorrow.",
      "parentUuid": "5ab0d525_6bd73b49",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d84fd5d_828a731d",
        "filename": "libs/binder/BpBinder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2023-11-03T19:07:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d683219b_1ec7c75d",
      "revId": "ac3d9a70597ffd47dab8f8cd1b7b9b0259d52ec2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}